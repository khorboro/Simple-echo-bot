from aiogram import Bot, Dispatcher

# Из библиотеки aiogram импортируем классы Bot и Dispatcher

from aiogram.filters import Command

# Из aiogram.filters импортируем класс Command, чтобы фильтровать апдейты по наличию в них команд, то есть сочетаний символов, начинающихся со знака "/". 

from aiogram.types import Message

#Из  aiogram.types импортируем класс Message. Апдейты этого типа мы будем ловить эхо-ботом.

BOT_TOKEN = 'BOT TOKEN HERE'

# Вместо BOT TOKEN HERE нужно вставить токен вашего бота, полученный у @BotFather
#Создаем переменную BOT_TOKEN и присваиваем ей значение токена бота, который можно узнать у @BotFather, то есть вместо 'BOT TOKEN HERE' нужно записать что-то типа: '5424991242:AAGwomxQz1p46bRi_2m3V7kvJlt5RjK9xr0'

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

#Инициализируем объекты бота и диспетчера. В качестве аргумента в Bot передаем BOT_TOKEN.

# Этот хэндлер будет срабатывать на команду "/start"
@dp.message(Command(commands=["start"]))
async def process_start_command(message: Message):
    await message.answer('Привет!\nМеня зовут Эхо-бот!\nНапиши мне что-нибудь')

#Когда вы первый раз запускаете бота - вы нажимаете на кнопку START в чате с ботом, или если вы уже запускали бота кнопкой START ранее, то вы можете просто отправить ему команду /start сообщением. 
#Желательно, чтобы бот на нее как-то реагировал. Для этого пишем обработчик (хэндлер), который будет срабатывать на команду /start. 
#По сути - это задекорированная асинхронная функция, которая на вход принимает объект типа Message, если срабатывает фильтр, указанный в декораторе (в данном случае через фильтр Command(commands=["start"]) как раз и пройдет только команда /start),  и что-то с этим объектом может сделать. 
#В нашем случае, через метод answer объекта типа Message хэндлер отправит в чат пользователю приветственное сообщение.

#Чтобы отправить текстовое сообщение в тот же чат используется упрощенная запись вида

await message.answer('Какой-то текст')

#Следующий хэндлер.

# Этот хэндлер будет срабатывать на команду "/help"
@dp.message(Command(commands=['help']))
async def process_help_command(message: Message):
    await message.answer(
        'Напиши мне что-нибудь и в ответ '
        'я пришлю тебе твое сообщение'
    )

# Этот хэндлер будет срабатывать на любые ваши текстовые сообщения,
# кроме команд "/start" и "/help"
@dp.message()
async def send_echo(message: Message):
    await message.reply(text=message.text)
В этот обработчик будут попадать вообще все сообщения от бота, кроме команд /start и /help, которые мы отлавливаем раньше. У него нет фильтров, то есть он примет любой апдейт. Именно поэтому в тексте программы он идет самым последним. 
